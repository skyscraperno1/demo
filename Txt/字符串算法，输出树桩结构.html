<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
/*
  实例一： 'abc'
   ---> {
       value:'abc'
   } 
  示例二：'[ab[bcd[def]]]'
   ---> {
       value'abc'
       children: {
           value:'bcd'
           children: {
               value:'def'
           }
       }
   }  
 */

// 1. 提取关键字符串
// 2. 构建树状结构{}
// '[abc[bcd[def]]]'.split(/[\[\]]/g).filter(v=> v)
// '[abc[bcd[def]]]'.split(/[\[\]]/g).filter(Boolean)
// '[abc[bcd[def]]]'.match(/\w+/g)
// var normalise = (str)=>{
//     var arr = str.match(/\w+/g)
//     let result = {}
//     let obj = result 
//     debugger
//     while(key = arr.shift()){
//         obj.value = key;
//         if (!arr.length) break
//         obj.children = {}
//         obj = obj.children
//     }
//     console.log(result);
// }
// normalise('[abc[bcd[def]]]')
    </script>
    <script>
        //方法2 reduce
        var normalise = (str)=>{
            var arr = str.split(/[\[\]]/g).filter(v=> v)
            var result = {}
            arr.reduce((res,it,index)=>{
                res.value = it
                if(index !== arr.length-1){
                    // res.children = {}
                    // return res.children
                    return (res.children = {})
                }
            },result)
            console.log(result);
        }
        normalise('[abc[bcd[def]]]')
    </script>
</body>
</html>

